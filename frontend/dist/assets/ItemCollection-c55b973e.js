import{s as S,u as I,z as x,a as k,r as B,A as V,H as d,K as q,l as N,b as m,o as i,n as v,g as n,f as b,e as L,F as A,B as R,c as g,i as p,C as U,D as E,p as F,k as z}from"./index-6b603672.js";import{S as H}from"./ShopItemCard-dc5885e8.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./product-5385049e.js";import"./avatar-4ee3f7af.js";import"./addProduct-a83f796c.js";const f=l=>(F("data-v-6ca9c55a"),l=l(),z(),l),M={class:"content-list"},O=f(()=>n("div",{class:"list-title"},"商品收藏",-1)),T=f(()=>n("div",{role:"tablist",class:"list-tabs-view flex-view"},null,-1)),j={class:"list-content"},G={class:"collect-thing-view"},J={class:"thing-list flex-view"},P={__name:"ItemCollection",setup(l){const u=S(),_=I(),y=x(),a=k({collectData:[]}),r=B(!1),w=()=>{h()};V(()=>{d().query.id?d().query.id.trim()!==String(_.user_id)&&u.push({name:"wishThingView",query:{id:d().query.id.trim()}}):u.push({name:"scoreView",query:{id:_.user_id}}),y.setViewId(_.user_id),h()});const C=s=>{for(var o=[],c=0;c<s.length;c++){var e=s[c];console.log(e);var t={};t.name=e.name,t.id=e.id,t.price=e.price,t.url=e.images.length!==0?E+e.images[0].image:null,t.avatarUrl=e.merchant_avatar,t.uploaderId=e.merchant,t.uploaderName=e.merchant_name,t.pv=e.views,o.push(t)}return o},h=async()=>{r.value=!0,q({}).then(s=>{const o=s.data;s.code===0&&(a.collectData=C(o),console.log(a.collectData)),r.value=!1}).catch(s=>{N({type:"error",message:"Oops!",description:s.response.data.detail}),r.value=!1})};return(s,o)=>{const c=m("a-empty"),e=m("a-spin");return i(),v("div",M,[O,T,n("div",j,[n("div",G,[b(e,{spinning:p(r),style:{"min-height":"200px"}},{default:L(()=>[n("div",J,[(i(!0),v(A,null,R(p(a).collectData,(t,D)=>(i(),g(H,{key:D,"shop-card":t,loading:!1,deletable:!0,onDeleteCollecter:w,style:{width:"30%",margin:"1%"}},null,8,["shop-card"]))),128)),!p(a).collectData||p(a).collectData.length<=0?(i(),g(c,{key:0,style:{width:"100%","margin-top":"200px"}})):U("",!0)])]),_:1},8,["spinning"])])])])}}},ee=K(P,[["__scopeId","data-v-6ca9c55a"]]);export{ee as default};
