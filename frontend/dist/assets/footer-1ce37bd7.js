import{d as K,u as U,z as k,k as z,r as _,o as u,b as h,e,f as a,G,c as O,x as n,l as i,A as P,w as j,H as J,F as Q,n as W,E as S,t as b,h as X,C as Y,p as I,g as R,M as Z}from"./index-68c43909.js";import{b as ee,S as se}from"./comment-13bad695.js";import{l as te}from"./logo_b-9bb82155.js";import{A as oe}from"./avatar-4ee3f7af.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";const ne="/assets/search-icon-2c208f60.svg",le="/assets/message-icon-b7a386ca.svg",C=l=>(I("data-v-be2ac466"),l=l(),R(),l),ae={class:"main-bar-view"},ie={class:"logo"},ce=["src"],re={class:"search-entry"},de=["src"],_e=["onKeyup"],ue={class:"right-view"},pe=C(()=>e("a",{href:"/admin",target:"__black",type:"a-link",style:{"line-height":"32px",width:"60px"}},"后台入口",-1)),he=["src"],ve=["src"],me={class:"msg-point"},fe={class:"list-content"},ge={class:"notification-view"},ke={class:"list"},we={class:"notification-item flex-view"},ye={class:"content-box"},be={class:"header"},Ce={class:"title-txt"},$e=C(()=>e("br",null,null,-1)),xe={class:"time"},Se=C(()=>e("div",{class:"head-text"},null,-1)),Ie={class:"content"},Re=K({__name:"header",setup(l){const c=X(),$=Y(),v=U(),y=k();let r=k(!1),d=k(!1),m=k([]),f=!0;z(()=>{x()});const x=()=>{r.value=!0,ee({userId:v.user_id}).then(t=>{console.log("结果返回"),console.log(t),m.value=t.data,r.value=!1,H(),console.log(f)}).catch(t=>{console.log(t),r.value=!1})},M=()=>{const t=y.value.value;if($.name==="search")c.push({name:"search",query:{keyword:t}});else{let s=c.resolve({name:"search",query:{keyword:t}});window.open(s.href,"_blank")}},B=()=>{c.push({name:"login"})},g=t=>{c.push({name:t})},A=()=>{v.logout().then(t=>{c.push({name:"portal"})})},F=()=>{d.value=!1},D=t=>{se({ids:t}).then(s=>{console.log("设置已阅状态成功"),x()}).catch(s=>{console.log(s)})},H=()=>{m==null||m.value.length<=0?(console.log("无"),f=!1):(console.log("有"),f=!0)};return(t,s)=>{const p=_("a-menu-item"),L=_("a-menu"),N=_("a-dropdown"),T=_("Button"),q=_("a-spin"),E=_("a-drawer");return u(),h("div",ae,[e("div",ie,[e("img",{src:a(te),class:"search-icon",onClick:s[0]||(s[0]=o=>t.$router.push({name:"portal"}))},null,8,ce)]),e("div",re,[e("img",{src:a(ne),class:"search-icon"},null,8,de),e("input",{placeholder:"输入关键词",ref_key:"keywordRef",ref:y,onKeyup:G(M,["enter"])},null,40,_e)]),e("div",ue,[pe,a(v).user_token?(u(),O(N,{key:0},{overlay:n(()=>[i(L,null,{default:n(()=>[i(p,null,{default:n(()=>[e("a",{onClick:s[2]||(s[2]=o=>g("collectThingView"))},"菜肴收藏")]),_:1}),i(p,null,{default:n(()=>[e("a",{onClick:s[3]||(s[3]=o=>g("scoreView"))},"柜台收藏")]),_:1}),i(p,null,{default:n(()=>[e("a",{onClick:s[4]||(s[4]=o=>g("wishThingView"))},"食堂收藏")]),_:1}),i(p,null,{default:n(()=>[e("a",{onClick:s[5]||(s[5]=o=>g("userInfoEditView"))},"账号设置")]),_:1}),i(p,null,{default:n(()=>[e("a",{onClick:s[6]||(s[6]=o=>A())},"退出")]),_:1})]),_:1})]),default:n(()=>[e("a",{class:"ant-dropdown-link",onClick:s[1]||(s[1]=o=>o.preventDefault())},[e("img",{src:a(oe),class:"self-img"},null,8,he)])]),_:1})):(u(),h("button",{key:1,class:"login btn hidden-sm",onClick:s[7]||(s[7]=o=>B())},"登录")),e("div",{class:"right-icon",onClick:s[8]||(s[8]=o=>P(d)?d.value=!0:d=!0)},[e("img",{src:a(le)},null,8,ve),j(e("span",me,null,512),[[J,a(f)]])]),e("div",null,[i(E,{title:"我的消息",placement:"right",closable:!0,maskClosable:!0,visible:a(d),onClose:F},{default:n(()=>[i(q,{spinning:a(r),style:{"min-height":"200px"}},{default:n(()=>[e("div",fe,[e("div",ge,[e("div",ke,[(u(!0),h(Q,null,W(a(m),o=>(u(),h("div",we,[e("div",ye,[e("div",be,[e("span",Ce,[S(b(o.title)+" ",1),i(T,{shape:"circle",onClick:Ne=>D(o.id)},{default:n(()=>[S("标为已读")]),_:2},1032,["onClick"])]),$e,e("span",xe,b(o.create_time),1)]),Se,e("div",Ie,[e("p",null,b(o.content),1)])])]))),256))])])])]),_:1},8,["spinning"])]),_:1},8,["visible"])])])])}}});const ze=V(Re,[["__scopeId","data-v-be2ac466"]]);const Ve={name:"Footer",data(){return{}},methods:{handleSource(){Z.info({title:"北航Python程序设计课大作业",content:"组员：任航麒、尹悠阳、张翼翔、范程",onOk(){}})}}},w=l=>(I("data-v-7d12c664"),l=l(),R(),l),Me={class:"footer-view"},Be={class:"foot-link-box flex-view"},Ae=w(()=>e("div",{class:"link-split"},null,-1)),Fe=w(()=>e("a",{href:"/admin",class:"foot-link",target:"_blank"},"后台管理",-1)),De=w(()=>e("div",{class:"link-split"},null,-1)),He=w(()=>e("div",{class:"footer-infos"},null,-1));function Le(l,c,$,v,y,r){return u(),h("div",Me,[e("div",Be,[Ae,Fe,De,e("a",{class:"foot-link",onClick:c[0]||(c[0]=(...d)=>r.handleSource&&r.handleSource(...d))},"关于我们")]),He])}const Ge=V(Ve,[["render",Le],["__scopeId","data-v-7d12c664"]]);export{Ge as F,ze as H};
