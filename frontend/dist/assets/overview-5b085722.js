import{l as C}from"./overview-ba068a06.js";import{d as S,z as r,a as D,k,r as p,o as F,c as L,x as l,e as c,l as n,f as A}from"./index-68c43909.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";const B={class:"main"},E=S({__name:"overview",setup(I){let d=r(!0);const h=r(),u=r(),v=r();let x,f,_,s=D({data:{}});k(()=>{g(),window.onresize=function(){x.resize(),f.resize(),_.resize()}});const g=()=>{C({}).then(e=>{console.log(e.data),s.data=e.data,m(),w(),b(),d.value=!1}).catch(e=>{d.value=!1})},m=()=>{let e=[],o=[],t=[];s.data.visit_data.forEach((i,y)=>{e.push(i.day),o.push(i.uv),t.push(i.pv)}),echarts.init(h.value),x=echarts.init(h.value);let a={title:{text:""},tooltip:{trigger:"axis"},legend:{data:["IP","visit"],top:"90%",left:"center"},grid:{top:"30px",left:"20px",right:"20px",bottom:"40px",containLabel:!0},xAxis:{type:"category",axisLabel:{textStyle:{color:"#2F4F4F"}},axisLine:{lineStyle:{color:"#2F4F4F"}},data:e},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"rgba(10, 10, 10, 0.1)",width:1,type:"solid"}}},series:[{name:"IP",type:"line",stack:"Total",data:o},{name:"visit",type:"line",stack:"Total",data:t}]};x.setOption(a)},w=()=>{let e=[],o=[];s.data.order_rank_data.forEach((a,i)=>{e.push(a.title),o.push(a.count)}),f=echarts.init(u.value);let t={grid:{top:"40px",left:"40px",right:"40px",bottom:"40px"},title:{text:"热门菜肴排名",textStyle:{color:"#aaa",fontStyle:"normal",fontWeight:"normal",fontSize:18},x:"center",y:"top"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{data:e,type:"category",axisLabel:{rotate:30,textStyle:{color:"#2F4F4F"}},axisLine:{lineStyle:{color:"#2F4F4F"}}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"rgba(10, 10, 10, 0.1)",width:1,type:"solid"}}},series:[{data:o,type:"bar",itemStyle:{normal:{color:function(a){return"#70B0EA"}}}}]};f.setOption(t)},b=()=>{let e=[];s.data.classification_rank_data.forEach((t,a)=>{e.push({name:t.title,value:t.count})}),_=echarts.init(v.value);const o={grid:{top:"40px",left:"40px",right:"40px",bottom:"40px"},title:{text:"热门菜肴分类",textStyle:{color:"#aaa",fontStyle:"normal",fontWeight:"normal",fontSize:18},x:"center",y:"top"},tooltip:{trigger:"item"},legend:{top:"90%",left:"center"},series:[{name:"分类",type:"pie",itemStyle:{normal:{color:function(t){const a=["#70B0EA","#B3A3DA","#88DEE2","#62C4C8","#58A3A1"];let i=t.dataIndex;return t.dataIndex>=a.length&&(i=t.dataIndex-a.length),a[i]}}},radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:e}]};_.setOption(o)};return(e,o)=>{const t=p("a-card"),a=p("a-col"),i=p("a-row"),y=p("a-spin");return F(),L(y,{spinning:A(d)},{default:l(()=>[c("div",B,[n(t,{title:"最近一周访问量"},{default:l(()=>[c("div",{style:{height:"300px"},ref_key:"visitChartDiv",ref:h},null,512)]),_:1}),n(i,{gutter:[20,20]},{default:l(()=>[n(a,{sm:24,md:24,lg:12},{default:l(()=>[n(t,{title:"热门菜肴排名",style:{flex:"1"}},{default:l(()=>[c("div",{style:{height:"300px"},ref_key:"barChartDiv",ref:u},null,512)]),_:1})]),_:1}),n(a,{sm:24,md:24,lg:12},{default:l(()=>[n(t,{title:"热门分类比例",style:{flex:"1"}},{default:l(()=>[c("div",{style:{height:"300px"},ref_key:"pieChartDiv",ref:v},null,512)]),_:1})]),_:1})]),_:1})])]),_:1},8,["spinning"])}}});const W=z(E,[["__scopeId","data-v-5d3e5377"]]);export{W as default};
