import{s as M,u as N,z as U,a as k,r as S,A as R,H as b,b as l,o as i,n as p,i as e,g as n,f as r,e as o,a5 as T,j as m,t as x,c as A,D as E,F as $,C as j,S as H,U as L,p as G,k as J}from"./index-6d07a472.js";import{A as K}from"./avatar-4ee3f7af.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const C=_=>(G("data-v-7ebf59d1"),_=_(),J(),_),P={class:"content-list"},Q={key:0,class:"list-title"},W={key:1,class:"list-title"},X=C(()=>n("div",{role:"tablist",class:"list-tabs-view flex-view"},null,-1)),Y={class:"list-content"},Z={class:"collect-thing-view"},ee={class:""},te=C(()=>n("div",null,[m(" Built by "),n("b",null,"BUAA DataBase")],-1)),ae=["onClick"],se={__name:"MyFollow",setup(_){const w=M(),v=N(),d=U();k({collectData:[]});let c=k([]),h=S(1);const u={onChange:t=>{console.log(t),h.value=t,g()},pageSize:4,total:0},f=S(!1),g=async()=>{f.value=!0;const t=await H({user_id:d.view_user_id,limit:u.pageSize,offset:(h.value-1)*u.pageSize});c.length=0;for(let a=0;a<t.data.results.length;a++)c.push(t.data.results[a]);u.total=t.data.count,f.value=!1},F=async t=>{L({ids:t}).then(async a=>{console.log(a.data),await g()}).catch(a=>{console.log(a)})};return R(async()=>{b().query.id||w.push({name:"scoreView",query:{id:v.user_id}}),await d.setViewId(b().query.id.trim()),await g()}),(t,a)=>{const B=l("a-button"),y=l("a-avatar"),I=l("a-list-item-meta"),V=l("a-list-item"),D=l("a-list"),q=l("a-spin");return i(),p("div",P,[e(d).view_user_id===e(v).user_id?(i(),p("div",Q,"我的关注")):(i(),p("div",W,"Ta的关注")),X,n("div",Y,[n("div",Z,[r(q,{spinning:e(f),style:{"min-height":"200px"}},{default:o(()=>[n("div",ee,[r(D,{"item-layout":"vertical",size:"large",pagination:u,"data-source":e(c),style:{width:"90%","align-content":"center"}},{footer:o(()=>[te]),renderItem:o(({item:s})=>[r(V,{key:"item.title"},T({default:o(()=>[r(I,null,{title:o(()=>[n("a",{onClick:z=>e(w).push({name:"wishThingView",query:{id:s.following}})},x(s.following_name),9,ae)]),avatar:o(()=>[s.following_avatar===""||s.following_avatar===null||s.following_avatar===void 0?(i(),A(y,{key:1,src:e(K)},null,8,["src"])):(i(),A(y,{key:0,src:e(E)+"/upload/"+s.following_avatar},null,8,["src"]))]),_:2},1024),m(" 关注时间："+x(s.create_time),1)]),_:2},[e(d).view_user_id===e(v).user_id?{name:"extra",fn:o(()=>[r(B,{type:"primary",shape:"round",danger:"",onClick:z=>F(s.id)},{default:o(()=>[m("取消关注")]),_:2},1032,["onClick"])]),key:"0"}:void 0]),1024)]),_:1},8,["data-source"]),!e(c)||e(c).length<=0?(i(),p($,{key:0},[],64)):j("",!0)])]),_:1},8,["spinning"])])])])}}},ie=O(se,[["__scopeId","data-v-7ebf59d1"]]);export{ie as default};
