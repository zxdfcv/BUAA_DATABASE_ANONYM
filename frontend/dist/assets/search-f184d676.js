import{H as x}from"./header-a4e4f775.js";import{F as D}from"./footer-ebba184f.js";import{u as b,s as z,H as u,a as B,A as I,w as q,b as f,o as _,n as p,g as o,t as m,i as n,f as d,e as P,F as V,B as A,c as F,C as N,z as y,p as U,k as E,D as H}from"./index-e9b87848.js";import{S as L}from"./ShopItemCard-bb112877.js";import{g as R}from"./product-b5f6e0d6.js";import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo_b-9bb82155.js";import"./avatar-4ee3f7af.js";import"./UserOutlined-cccea923.js";import"./addProduct-579f49f8.js";const w=l=>(U("data-v-8336a6b2"),l=l(),E(),l),$={class:"content-margin"},M={class:"search-name-box"},O={style:{background:"#ffffff"}},j={class:"search-tab-nav clearfix"},G={class:"tab-text"},J=w(()=>o("span",null,"与",-1)),K={class:"strong"},Q=w(()=>o("span",null,"相关的内容",-1)),T={class:"content-list"},W={class:"thing-list"},X={class:"pc-thing-list"},Y={key:0,class:"no-data",style:{}},Z={class:"page-view",style:{}},ee={__name:"search-content-view",setup(l){b();const g=z(),i=u(),e=B({loading:!1,keyword:"",thingData:[],pageData:[],page:1,total:0,pageSize:12});I(()=>{h(1)}),q(u(),(s,c)=>{g.go(0)});const k=s=>{for(var c=[],r=0;r<s.results.length;r++){var a=s.results[r];console.log(a);var t={};t.name=a.name,t.id=a.id,t.price=a.price,t.url=a.images.length!==0?H+a.images[0].image:null,t.avatarUrl=a.merchant_avatar,t.uploaderId=a.merchant,t.uploaderName=a.merchant_name,t.pv=a.views,t.off_shelve=a.off_shelve,t.is_sold=a.is_sold,c.push(t)}return[c,s.count]},S=()=>{var c;e.keyword=(c=i.query.keyword)==null?void 0:c.trim(),e.loading=!0;const s={limit:e.pageSize};i.query.type==="C_1"?s.classification1=y().checkC_1[e.keyword]:i.query.type==="C_2"?s.classification2=y().checkC_2[e.keyword]:i.query.type==="addr"?s.addr=e.keyword==="学院路校区"?1:e.keyword==="沙河校区"?2:3:i.query.type==="status"?s.status=e.keyword==="全新"?"A":e.keyword==="几乎全新"?"B":e.keyword==="轻微使用痕迹"?"C":e.keyword==="明显使用痕迹"?"D":"E":s.keyword=e.keyword,s.offset=e.pageSize*(e.page-1),R(s).then(r=>{r.code===0&&([e.thingData,e.total]=k(r.data)),console.log(e.thingData),e.loading=!1}).catch(r=>{console.log(r),e.loading=!1})},h=s=>{e.page=s,S()};return(s,c)=>{const r=f("a-spin"),a=f("a-pagination");return _(),p("div",$,[o("h1",M,m(n(e).keyword),1),o("div",O,[o("div",j,[o("div",G,[J,o("span",K,m(n(e).keyword),1),Q])]),o("div",T,[o("div",W,[d(r,{spinning:n(e).loading,style:{"min-height":"200px"}},{default:P(()=>[o("div",X,[(_(!0),p(V,null,A(n(e).thingData,(t,C)=>(_(),F(L,{key:C,"shop-card":t,loading:n(e).loading,style:{width:"30%",margin:"1%"}},null,8,["shop-card","loading"]))),128)),n(e).thingData.length<=0&&!n(e).loading?(_(),p("div",Y,"暂无数据")):N("",!0)])]),_:1},8,["spinning"]),o("div",Z,[d(a,{current:n(e).page,"onUpdate:current":c[0]||(c[0]=t=>n(e).page=t),size:"small",onChange:h,hideOnSinglePage:!0,defaultPageSize:n(e).pageSize,total:n(e).total},null,8,["current","defaultPageSize","total"])])])])])])}}},se=v(ee,[["__scopeId","data-v-8336a6b2"]]);const te={class:"search"},ae={class:"search-content"},oe={__name:"search",setup(l){return(g,i)=>(_(),p("div",te,[d(x),o("div",ae,[d(se)]),d(D)]))}},ue=v(oe,[["__scopeId","data-v-01c1a933"]]);export{ue as default};
