import{H as j}from"./header-808b5fed.js";import{F as O}from"./footer-5df1afb8.js";import{z as q,u as M,s as X,a as T,A as G,w as J,b as c,o as g,n as h,g as i,f as r,e as _,i as s,F as D,B as w,c as C,j as Q,t as W,C as Y,l as z,p as Z,k as ee,D as te}from"./index-6d07a472.js";import{S as ae}from"./ShopItemCard-745606da.js";import{g as se}from"./product-eb9e53e1.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo_b-9bb82155.js";import"./avatar-4ee3f7af.js";import"./UserOutlined-056eb93f.js";import"./addProduct-cfaaac86.js";const x=u=>(Z("data-v-d2d973e4"),u=u(),ee(),u),oe={class:"home"},ne={class:"content"},ce={class:"content-left"},le={class:"left-search-item"},re=x(()=>i("h3",null,"商品分类",-1)),ie=x(()=>i("h3",null,"分类标签",-1)),de={style:{"margin-top":"12px","margin-bottom":"12px"}},pe={class:"content-right"},_e={class:"top-select-view flex-view"},ge={class:"order-view"},he=x(()=>i("span",{class:"title",style:{top:"-20px"}},null,-1)),ue={class:"pc-thing-list flex-view"},fe={key:0,class:"no-data",style:{}},me={class:"page-view",style:{}},ve={__name:"content",setup(u){const v=q();M(),X();const e=T({selectX:0,selectTagId:-1,cData:[],bData:[],selectedKeyss:["0-0-0","0-0-1"],checkedKeys:["0-0-0","0-0-1"],tagData:[],selectData:[],loading:!1,tabData:["最新","推荐","学院路校区","沙河校区","两校区均可"],selectTabIndex:0,tabUnderLeft:12,thingData:[],pageData:[],value:[],page:1,total:0,pageSize:6,classifyData:[],expandedKeys:[]}),S={children:"children",label:"label"};G(()=>{B()});const a=T({keyword:"",classification1:"",classification2:"",status:"",addr:"",price:"",sort:"",limit:6}),I=t=>{for(var d=[],l=0;l<t.results.length;l++){var o=t.results[l];console.log(o);var n={};n.name=o.name,n.id=o.id,n.price=o.price,n.url=o.images.length!==0?te+o.images[0].image:null,n.avatarUrl=o.merchant_avatar,n.uploaderId=o.merchant,n.uploaderName=o.merchant_name,n.pv=o.views,n.off_shelve=o.off_shelve,n.is_sold=o.is_sold,d.push(n)}return[d,t.count]},b=(t,d)=>{if(t<=4)if(d){for(var l=0;l<=4;l++)e.selectData[l]=!1;switch(e.selectData[t]=!0,t){case 0:a.status="A";break;case 1:a.status="B";break;case 2:a.status="C";break;case 3:a.status="D";break;case 4:a.status="E";break}}else a.status="";else if(d){for(var l=5;l<=10;l++)e.selectData[l]=!1;e.selectData[t]=!0,a.price=String(t-4)}else a.price="";f(1)},y=async()=>{e.loading=!0,a.offset=(e.page-1)*e.pageSize,se(a).then(t=>{t.code===0?[e.thingData,e.total]=I(t.data):z({type:"error",message:"Oops!",description:t.msg}),e.loading=!1}).catch(t=>{e.loading=!1,z({type:"error",message:"Oops!",description:t.msg})})},B=async()=>{e.classifyData=await v.getCTree(),e.tagData=["全新","几乎全新","轻微使用痕迹","明显使用痕迹","有一定问题","0~49元","50~99元","100~199元","200~499元","500~999元","1000~元"],e.selectData=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],await f(1),console.log(e.total)},K=t=>{console.log(t.key.split("-")),e.selectedKeys=[],e.selectTagId=t,t.key.split("-").length===2?(a.classification1=v.checkC_1[t.label],a.classification2=""):(a.classification1="",a.classification2=v.checkC_2[t.label]),f(1)},N=()=>{switch(e.selectTabIndex){case 0:a.sort="create_time",a.addr="";break;case 1:a.sort="hot",a.addr="";break;case 2:a.addr="1";break;case 3:a.addr="2";break;case 4:a.addr="3";break}f(1)},f=async t=>{e.page=t,await y(),console.log("第"+e.page+"页")};return J(()=>e.selectTabIndex,()=>{console.log(e.selectTabIndex),N()}),(t,d)=>{const l=c("el-tree"),o=c("el-scrollbar"),n=c("Card"),P=c("a-checkable-tag"),$=c("a-space"),A=c("Col"),F=c("a-tab-pane"),H=c("a-tabs"),L=c("a-spin"),R=c("a-pagination"),V=c("Row"),E=c("a-card");return g(),h("div",oe,[i("div",ne,[r(E,{style:{width:"100%",height:"fit-content"}},{default:_(()=>[r(V,null,{default:_(()=>[r(A,{span:"5"},{default:_(()=>[i("div",ce,[i("div",le,[r(n,null,{default:_(()=>[re,r(o,null,{default:_(()=>[r(l,{data:s(e).classifyData,props:S,accordion:"","highlight-current":"",onNodeClick:K,style:{"max-height":"300px","min-height":"200px","margin-left":"5px","margin-top":"10px"}},null,8,["data"])]),_:1})]),_:1})]),i("div",null,[r(n,{style:{"max-height":"360px","min-height":"150px",margin:"24px 0 12px"}},{default:_(()=>[ie,i("div",de,[r($,{size:[0,8],wrap:""},{default:_(()=>[(g(!0),h(D,null,w(s(e).tagData,(p,m)=>(g(),C(P,{key:p,checked:s(e).selectData[m],"onUpdate:checked":k=>s(e).selectData[m]=k,onChange:k=>b(m,k)},{default:_(()=>[Q(W(p),1)]),_:2},1032,["checked","onUpdate:checked","onChange"]))),128))]),_:1})])]),_:1})])])]),_:1}),i("div",pe,[i("div",_e,[i("div",ge,[he,r(H,{activeKey:s(e).selectTabIndex,"onUpdate:activeKey":d[1]||(d[1]=p=>s(e).selectTabIndex=p)},{default:_(()=>[(g(!0),h(D,null,w(s(e).tabData,(p,m)=>(g(),C(F,{key:m,tab:p,onClick:d[0]||(d[0]=()=>{})},null,8,["tab"]))),128))]),_:1},8,["activeKey"])])]),r(L,{spinning:s(e).loading,style:{"min-height":"200px"}},{default:_(()=>[i("div",ue,[(g(!0),h(D,null,w(s(e).thingData,p=>(g(),C(ae,{key:p.id,"shop-card":p,loading:s(e).loading,style:{width:"30%",height:"400%",margin:"1%"}},null,8,["shop-card","loading"]))),128)),s(e).thingData.length<=0&&!s(e).loading?(g(),h("div",fe,"暂无数据")):Y("",!0)])]),_:1},8,["spinning"]),i("div",me,[r(R,{current:s(e).page,"onUpdate:current":d[2]||(d[2]=p=>s(e).page=p),size:"small",onChange:f,defaultPageSize:s(e).pageSize,total:s(e).total,"show-quick-jumper":"",showSizeChanger:!1},null,8,["current","defaultPageSize","total"])])])]),_:1})]),_:1})])])}}},be=U(ve,[["__scopeId","data-v-d2d973e4"]]),ye={components:{Footer:O,Header:j,Content:be},data(){return{}}},ke={class:"portal"};function De(u,v,e,S,a,I){const b=c("Header"),y=c("Content");return g(),h("div",ke,[r(b),r(y)])}const Ne=U(ye,[["render",De]]);export{Ne as default};
