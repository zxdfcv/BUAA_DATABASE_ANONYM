import{j as L,I as C,d as R,u as G,a as A,z as I,k as H,r,o as m,b as y,e as a,l as s,x as n,F as S,n as J,t as w,f as o,y as U,c as K,p as P,g as Q}from"./index-68c43909.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";const X=async i=>L({url:"/myapp/index/address/list",params:i,data:{},headers:{}}),Y=async i=>C({url:"/myapp/index/address/create",params:{},data:i,headers:{"Content-Type":"multipart/form-data;charset=utf-8"}}),Z=async(i,p)=>C({url:"/myapp/index/address/update",params:i,data:p,headers:{"Content-Type":"multipart/form-data;charset=utf-8"}}),ee=async i=>C({url:"/myapp/index/address/delete",params:i,headers:{}}),te="/assets/address-right-icon-b4e00956.svg",D=i=>(P("data-v-03a2ddfe"),i=i(),Q(),i),se={class:"content-list"},ae=D(()=>a("span",null,"地址管理",-1)),oe={class:"list-content"},ne={class:"address-item flex-view"},le={class:"infos"},de={class:"name-box"},ie={class:"name"},re={class:"tel"},ce={class:"address-box"},me={class:"do-box"},pe={class:"btns"},_e=["onClick"],fe=D(()=>a("span",{class:"delete"},"删除",-1)),ue={key:0,class:"default-box"},ve=["src"],he=D(()=>a("span",null,"默认地址",-1)),ge=R({__name:"address-view",setup(i){const p=G(),_=A({addressData:[]}),f=I(!1),e=A({visile:!1,editFlag:!1,title:"",form:{id:void 0,name:void 0,mobile:void 0,desc:void 0,default:!1},rules:{link:[{required:!0,message:"请输入",trigger:"change"}]}}),b=I();H(()=>{u()});const u=()=>{f.value=!0;let l=p.user_id;X({userId:l}).then(t=>{_.addressData=t.data,f.value=!1}).catch(t=>{console.log(t),f.value=!1})},V=l=>{ee({ids:l.id}).then(t=>{u()}).catch(t=>{console.log(t)})},B=()=>{F(),e.visile=!0,e.editFlag=!1,e.title="新增";for(const l in e.form)e.form[l]=void 0;e.form.image=void 0},M=l=>{F(),e.visile=!0,e.editFlag=!0,e.title="编辑";for(const t in e.form)e.form[t]=void 0;for(const t in l)e.form[t]=l[t];e.form.image=void 0},N=()=>{var l;(l=b.value)==null||l.validate().then(()=>{const t=new FormData;t.append("user",p.user_id),t.append("default",e.form.default?"true":"false"),e.form.name&&t.append("name",e.form.name),e.form.mobile&&t.append("mobile",e.form.mobile),e.form.desc&&t.append("desc",e.form.desc),e.editFlag?Z({id:e.form.id},t).then(c=>{x(),u()}).catch(c=>{console.log(c)}):Y(t).then(c=>{x(),u()}).catch(c=>{console.log(c)})}).catch(t=>{console.log("不能为空")})},E=()=>{x()},F=()=>{var l;(l=b.value)==null||l.resetFields()},x=()=>{e.visile=!1};return(l,t)=>{const c=r("a-popconfirm"),O=r("a-empty"),T=r("a-spin"),k=r("a-input"),v=r("a-form-item"),h=r("a-col"),g=r("a-row"),$=r("a-switch"),j=r("a-form"),q=r("a-modal");return m(),y(S,null,[a("div",se,[a("div",{class:"list-title"},[ae,a("span",{class:"add-new-btn",onClick:B},"新建地址")]),s(T,{spinning:o(f),style:{"min-height":"200px"}},{default:n(()=>[a("div",oe,[(m(!0),y(S,null,J(o(_).addressData,d=>(m(),y("div",ne,[a("div",le,[a("div",de,[a("span",ie,w(d.name),1),a("span",re,w(d.mobile),1)]),a("p",ce,w(d.desc),1)]),a("div",me,[a("div",pe,[a("span",{class:"edit",onClick:z=>M(d)},"编辑",8,_e),s(c,{title:"确定删除？","ok-text":"是","cancel-text":"否",onConfirm:z=>V(d)},{default:n(()=>[fe]),_:2},1032,["onConfirm"])]),d.default?(m(),y("div",ue,[a("img",{src:o(te)},null,8,ve),he])):U("",!0)])]))),256)),!o(_).addressData||o(_).addressData.length<=0?(m(),K(O,{key:0,style:{width:"100%","margin-top":"200px"}})):U("",!0)])]),_:1},8,["spinning"])]),a("div",null,[s(q,{visible:o(e).visile,forceRender:!0,title:o(e).title,"ok-text":"确认","cancel-text":"取消",onCancel:E,onOk:N},{default:n(()=>[a("div",null,[s(j,{ref_key:"myform",ref:b,"label-col":{style:{width:"80px"}},model:o(e).form,rules:o(e).rules},{default:n(()=>[s(g,{gutter:24},{default:n(()=>[s(h,{span:"24"},{default:n(()=>[s(v,{label:"姓名",name:"name"},{default:n(()=>[s(k,{placeholder:"请输入",value:o(e).form.name,"onUpdate:value":t[0]||(t[0]=d=>o(e).form.name=d)},null,8,["value"])]),_:1})]),_:1})]),_:1}),s(g,{gutter:24},{default:n(()=>[s(h,{span:"24"},{default:n(()=>[s(v,{label:"电话号码",name:"mobile"},{default:n(()=>[s(k,{placeholder:"请输入",value:o(e).form.mobile,"onUpdate:value":t[1]||(t[1]=d=>o(e).form.mobile=d)},null,8,["value"])]),_:1})]),_:1})]),_:1}),s(g,{gutter:24},{default:n(()=>[s(h,{span:"24"},{default:n(()=>[s(v,{label:"送货地址",name:"desc"},{default:n(()=>[s(k,{placeholder:"请输入",value:o(e).form.desc,"onUpdate:value":t[2]||(t[2]=d=>o(e).form.desc=d)},null,8,["value"])]),_:1})]),_:1})]),_:1}),s(g,{gutter:24},{default:n(()=>[s(h,{span:"24"},{default:n(()=>[s(v,{label:"默认地址"},{default:n(()=>[s($,{checked:o(e).form.default,"onUpdate:checked":t[3]||(t[3]=d=>o(e).form.default=d)},null,8,["checked"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["visible","title"])])],64)}}});const xe=W(ge,[["__scopeId","data-v-03a2ddfe"]]);export{xe as default};
