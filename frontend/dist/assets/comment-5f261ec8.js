import{j as K,I as B,d as A,a as p,k as N,B as E,z as V,r as c,o as g,b as u,e as _,l as s,x as i,E as f,y as $,f as n,m as r,p as j,g as D}from"./index-68c43909.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const T=async a=>K({url:"/myapp/admin/comment/list",params:a,data:{},headers:{}}),h=async a=>B({url:"/myapp/admin/comment/delete",params:a,headers:{}}),U=a=>(j("data-v-2eb635ef"),a=a(),D(),a),q={class:"page-view"},F={class:"table-operations"},M={key:0},G=U(()=>_("a",{href:"#"},"删除",-1)),H=A({__name:"comment",setup(a){const y=p([{title:"序号",dataIndex:"id",key:"id",align:"center"},{title:"用户",dataIndex:"username",key:"username",align:"center"},{title:"菜肴名称",dataIndex:"title",key:"title",align:"center"},{title:"评论内容",dataIndex:"content",key:"content",align:"center"},{title:"评论时间",dataIndex:"comment_time",key:"comment_time",align:"center"},{title:"操作",dataIndex:"action",key:"operation",align:"center",fixed:"right",width:140}]),e=p({list:[],loading:!1,currentAdminUserName:"",keyword:"",selectedRowKeys:[],pageSize:10,page:1});p({visile:!1,editFlag:!1,title:"",form:{id:void 0,image:void 0,link:void 0},rules:{link:[{required:!0,message:"请输入",trigger:"change"}]}}),N(()=>{m()});const m=()=>{e.loading=!0,T({keyword:e.keyword}).then(t=>{e.loading=!1,console.log(t),t.data.forEach((o,l)=>{o.index=l+1,o.image&&(o.image=E+o.image)}),e.list=t.data}).catch(t=>{e.loading=!1,console.log(t)})},w=V({onChange:(t,o)=>{console.log(`selectedRowKeys: ${t}`,"selectedRows: ",o),e.selectedRowKeys=t}}),x=()=>{},k=t=>{console.log("delete",t),h({ids:t.id}).then(o=>{m()}).catch(o=>{r.error(o.msg||"操作失败")})},v=()=>{if(console.log(e.selectedRowKeys),e.selectedRowKeys.length<=0){console.log("hello"),r.warn("请勾选删除项");return}h({ids:e.selectedRowKeys.join(",")}).then(t=>{r.success("删除成功"),e.selectedRowKeys=[],m()}).catch(t=>{r.error(t.msg||"操作失败")})};return(t,o)=>{const l=c("a-button"),C=c("a-space"),I=c("a-divider"),b=c("a-popconfirm"),S=c("a-table");return g(),u("div",null,[_("div",q,[_("div",F,[s(C,null,{default:i(()=>[s(l,{type:"primary",onClick:x},{default:i(()=>[f("模拟新增")]),_:1}),s(l,{onClick:v},{default:i(()=>[f("批量删除")]),_:1})]),_:1})]),s(S,{size:"middle",rowKey:"id",loading:n(e).loading,columns:n(y),"data-source":n(e).list,scroll:{x:"max-content"},"row-selection":n(w),pagination:{size:"default",current:n(e).page,pageSize:n(e).pageSize,onChange:d=>n(e).page=d,showSizeChanger:!1,showTotal:d=>`共${d}条数据`}},{bodyCell:i(({text:d,record:R,index:J,column:z})=>[z.key==="operation"?(g(),u("span",M,[s(I,{type:"vertical"}),s(b,{title:"确定删除?","ok-text":"是","cancel-text":"否",onConfirm:O=>k(R)},{default:i(()=>[G]),_:2},1032,["onConfirm"])])):$("",!0)]),_:1},8,["loading","columns","data-source","row-selection","pagination"])])])}}});const W=L(H,[["__scopeId","data-v-2eb635ef"]]);export{W as default};
