import{a as c}from"./log-59a2d5cf.js";import{d as r,a as i,A as g,r as _,b as p,o as m,n as u,g as f,f as x,i as t}from"./index-6b603672.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";const h={class:"page-view"},k=r({__name:"op-log",setup(w){const d=i([{title:"序号",dataIndex:"index",key:"index",align:"center"},{title:"请求方式",dataIndex:"re_method",key:"re_method",align:"center"},{title:"请求URL",dataIndex:"re_url",key:"re_url",align:"center"},{title:"操作IP",dataIndex:"re_ip",key:"re_ip",align:"center"},{title:"操作时间",dataIndex:"re_time",key:"re_time",align:"center"},{title:"耗时",dataIndex:"access_time",key:"access_time",align:"center",customRender:({text:a,record:o,index:s,column:n})=>a+"ms"}]),e=i({dataList:[],loading:!1,keyword:"",selectedRowKeys:[],pageSize:10,page:1,total:0});g(()=>{l()});const l=()=>{e.loading=!0,c({limit:e.pageSize,offset:e.pageSize*(e.page-1),keyword:e.keyword}).then(a=>{e.loading=!1,console.log(a.data.results);let o=a.data.results;o.forEach((s,n)=>{s.index=n+1+e.pageSize*(e.page-1)}),e.dataList=o,e.total=a.data.count}).catch(a=>{e.loading=!1,console.log(a)})};return _({onChange:(a,o)=>{console.log(`selectedRowKeys: ${a}`,"selectedRows: ",o),e.selectedRowKeys=a}}),(a,o)=>{const s=p("a-table");return m(),u("div",null,[f("div",h,[x(s,{size:"middle",rowKey:"id",loading:t(e).loading,columns:t(d),"data-source":t(e).dataList,scroll:{x:"max-content"},pagination:{size:"default",current:t(e).page,pageSize:t(e).pageSize,total:t(e).total,onChange:n=>{t(e).page=n,l()},showSizeChanger:!1,showTotal:n=>`共${n}条数据`}},null,8,["loading","columns","data-source","pagination"])])])}}});const I=y(k,[["__scopeId","data-v-08ea3c03"]]);export{I as default};
