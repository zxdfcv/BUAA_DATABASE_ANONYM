import{u as S,z as v,k as B,B as I,r as m,o as a,b as c,e,l as b,x as L,F as R,n as A,t as d,y as h,f as _,c as E,h as H,C as N,m as U,p as V,g as W}from"./index-68c43909.js";import{c as D,r as F}from"./thing-333260d6.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const g=i=>(V("data-v-f99c23f6"),i=i(),W(),i),$={class:"content-list"},q=g(()=>e("div",{class:"list-title"},"购买记录",-1)),z=g(()=>e("div",{role:"tablist",class:"list-tabs-view flex-view"},null,-1)),M={class:"list-content"},j={class:"collect-thing-view"},G={class:"thing-list flex-view"},J=["onClick"],K=["onClick"],O=["src"],P={class:"info-view"},Q={class:"thing-name"},X={key:0,class:"authors"},Y={key:1,class:"translators"},Z={__name:"thingHistory",setup(i){const f=H();N();const u=S();let l=v([]);B(()=>{p()});const r=v(!1),y=n=>{let s=f.resolve({name:"detail",query:{id:n.id}});window.open(s.href,"_blank")},k=n=>{let s=u.user_name;F({username:s,thingId:n.id}).then(o=>{U.success("移除成功"),p()}).catch(o=>{console.log(o)})},p=()=>{r.value=!0;let n=u.user_name;D({username:n}).then(s=>{s.data.forEach(o=>{o.cover=I+o.cover}),l.value=s.data,r.value=!1}).catch(s=>{console.log(s.msg),r.value=!1})};return(n,s)=>{const o=m("a-empty"),w=m("a-spin");return a(),c("div",$,[q,z,e("div",M,[e("div",j,[b(w,{spinning:_(r),style:{"min-height":"200px"}},{default:L(()=>[e("div",G,[(a(!0),c(R,null,A(_(l),(t,x)=>(a(),c("div",{class:"thing-item item-column-3",key:x},[e("div",{class:"remove",onClick:C=>k(t)},"移出",8,J),e("div",{class:"img-view",onClick:C=>y(t)},[e("img",{src:t.cover},null,8,O)],8,K),e("div",P,[e("h3",Q,d(t.title),1),t.author?(a(),c("p",X,d(t.author)+"（作者)",1)):h("",!0),t.translator?(a(),c("p",Y,d(t.translator)+"（译者）",1)):h("",!0)])]))),128)),!_(l)||_(l).length<=0?(a(),E(o,{key:0,style:{width:"100%","margin-top":"200px"}})):h("",!0)])]),_:1},8,["spinning"])])])])}}},oe=T(Z,[["__scopeId","data-v-f99c23f6"]]);export{oe as default};
