import{l as U,d as y,u as G,c as H}from"./tag-5d01b266.js";import{d as J,a as g,r as w,A as P,b as l,o as k,n as b,g as d,f as s,e as i,j as x,C as Q,i as n,M as r,p as W,k as X}from"./index-6d07a472.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";const Z=m=>(W("data-v-0f3b4b0b"),m=m(),X(),m),ee={class:"page-view"},oe={class:"table-operations"},te={key:0},ae=["onClick"],ne=Z(()=>d("a",{href:"#"},"删除",-1)),se=J({__name:"tag",setup(m){const C=g([{title:"序号",dataIndex:"id",key:"id",align:"center"},{title:"标签名称",dataIndex:"name",key:"name",align:"center"},{title:"操作",dataIndex:"action",key:"operation",align:"center",fixed:"right",width:140}]),a=g({groupList:[],loading:!1,keyword:"",selectedRowKeys:[],pageSize:10,page:1}),o=g({visile:!1,editFlag:!1,title:"",form:{id:void 0,name:void 0},rules:{title:[{required:!0,message:"请输入",trigger:"change"}]}}),f=w();P(()=>{_()});const _=()=>{a.loading=!0,U({keyword:a.keyword}).then(e=>{a.loading=!1,console.log(e),e.data.forEach((t,p)=>{t.index=p+1}),a.groupList=e.data}).catch(e=>{a.loading=!1,console.log(e)})},R=w({onChange:(e,t)=>{console.log(`selectedRowKeys: ${e}`,"selectedRows: ",t),a.selectedRowKeys=e}}),S=()=>{h(),o.visile=!0,o.editFlag=!1,o.title="新增";for(const e in o.form)o.form[e]=void 0},I=e=>{h(),o.visile=!0,o.editFlag=!0,o.title="编辑";for(const t in o.form)o.form[t]=void 0;for(const t in e)o.form[t]=e[t]},K=e=>{console.log("delete",e),y({ids:e.id}).then(t=>{_()}).catch(t=>{r.error(t.msg||"操作失败")})},z=()=>{if(console.log(a.selectedRowKeys),a.selectedRowKeys.length<=0){console.log("hello"),r.warn("请勾选删除项");return}y({ids:a.selectedRowKeys.join(",")}).then(e=>{r.success("删除成功"),a.selectedRowKeys=[],_()}).catch(e=>{r.error(e.msg||"操作失败")})},A=()=>{var e;(e=f.value)==null||e.validate().then(()=>{o.editFlag?G({id:o.form.id},o.form).then(t=>{u(),_()}).catch(t=>{r.error(t.msg||"操作失败")}):H(o.form).then(t=>{u(),_()}).catch(t=>{r.error(t.msg||"操作失败")})}).catch(t=>{console.log("不能为空")})},F=()=>{u()},h=()=>{var e;(e=f.value)==null||e.resetFields()},u=()=>{o.visile=!1};return(e,t)=>{const p=l("a-button"),B=l("a-space"),L=l("a-divider"),M=l("a-popconfirm"),N=l("a-table"),V=l("a-input"),$=l("a-form-item"),D=l("a-col"),E=l("a-row"),j=l("a-form"),O=l("a-modal");return k(),b("div",null,[d("div",ee,[d("div",oe,[s(B,null,{default:i(()=>[s(p,{type:"primary",onClick:S},{default:i(()=>[x("新增")]),_:1}),s(p,{onClick:z},{default:i(()=>[x("批量删除")]),_:1})]),_:1})]),s(N,{size:"middle",rowKey:"id",loading:n(a).loading,columns:n(C),"data-source":n(a).groupList,scroll:{x:"max-content"},"row-selection":n(R),pagination:{size:"default",current:n(a).page,pageSize:n(a).pageSize,onChange:c=>n(a).page=c,showSizeChanger:!1,showTotal:c=>`共${c}条数据`}},{bodyCell:i(({text:c,record:v,index:le,column:T})=>[T.key==="operation"?(k(),b("span",te,[d("a",{onClick:q=>I(v)},"编辑",8,ae),s(L,{type:"vertical"}),s(M,{title:"确定删除?","ok-text":"是","cancel-text":"否",onConfirm:q=>K(v)},{default:i(()=>[ne]),_:2},1032,["onConfirm"])])):Q("",!0)]),_:1},8,["loading","columns","data-source","row-selection","pagination"])]),d("div",null,[s(O,{visible:n(o).visile,forceRender:!0,title:n(o).title,"ok-text":"确认","cancel-text":"取消",onCancel:F,onOk:A},{default:i(()=>[d("div",null,[s(j,{ref_key:"myform",ref:f,"label-col":{style:{width:"80px"}},model:n(o).form,rules:n(o).rules},{default:i(()=>[s(E,{gutter:24},{default:i(()=>[s(D,{span:"24"},{default:i(()=>[s($,{label:"标签名称",name:"name"},{default:i(()=>[s(V,{placeholder:"请输入",value:n(o).form.name,"onUpdate:value":t[0]||(t[0]=c=>n(o).form.name=c)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["visible","title"])])])}}});const de=Y(se,[["__scopeId","data-v-0f3b4b0b"]]);export{de as default};
